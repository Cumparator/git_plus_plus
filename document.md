# Руководство пользователя Git++ (GPP)

Добро пожаловать в **Git++**! Это инструмент нового поколения поверх Git, который меняет подход к управлению версиями.

Вместо того чтобы путаться в ветках (`branches`) и постоянных `rebase`, Git++ предлагает вам работать с **Графом Версий**. Вы можете сохранять состояние проекта в любой момент и гибко управлять тем, какая часть истории попадет в публичный репозиторий, а какая останется приватной.

## Быстрый старт

### 1. Инициализация

Чтобы начать пользоваться Git++ в папке проекта, выполните команду инициализации. Вы можете сразу указать несколько удаленных репозиториев (remotes), с которыми планируете работать.

```bash
# Простая инициализация (создаст remote по умолчанию "origin")
gpp init

# Продвинутая инициализация сразу с двумя контекстами: личным и рабочим
gpp init origin work=git@github.com:my-company/secret-project.git

```

### 2. Сохранение изменений (Создание Ноды)

В Git++ мы оперируем **Нодами** (Nodes). Нода — это снимок вашего проекта.

```bash
# Добавить все изменения и создать ноду
gpp add -m "Моя первая нода"

```

> **Важно:** При создании ноды она автоматически "наследует" права доступа от своего родителя. Если предыдущая нода была публичной, новая тоже будет публичной по умолчанию.

### 3. Просмотр истории

Вы можете посмотреть текстовый лог или открыть визуальный граф.

```bash
# Текстовый список
gpp log

# Графический интерфейс (рекомендуется)
gpp gui

```

В GUI вы увидите "лес" изменений. Каждая точка — это нода. Вы можете навести на нее курсор, чтобы увидеть детали и права доступа.

---

## Ключевая фишка: Селективный Push

Самая мощная возможность Git++ — это **Selective Push**. Она позволяет вести разработку в одном репозитории, но отправлять разные части истории разным людям.

Представьте, что вы пишете Open Source библиотеку, но часть функций — это секретный код для корпоративного заказчика.

### Сценарий: "Секретная ветка"

1. **Работаем публично.**
Вы делаете обычные коммиты. Они имеют доступ к `origin`.
```bash
gpp add -m "Общая логика"

```


2. **Начинаем секретную работу.**
Вы создаете коммит и хотите, чтобы он **никогда** случайно не улетел в публичный `origin`, но уходил на `work`.
Используем команду `chrm` (Change Remote) для управления правами текущей ноды:
```bash
# 1. Создаем ноду
gpp add -m "Секретный алгоритм"

# 2. Получаем ID этой ноды (из вывода предыдущей команды или gpp log)
# Допустим, ID = a1b2c3d...

# 3. Разрешаем отправку на "work"
gpp chrm --node a1b2c3d --remote work --url git@server:corp.git

# 4. ЗАПРЕЩАЕМ отправку на "origin"
gpp chrm --node a1b2c3d --remote origin --remove

```


3. **Продолжаем работу.**
Следующая нода, которую вы создадите от "Секретного алгоритма", унаследует права родителя. Она будет иметь доступ *только* к `work`.
```bash
gpp add -m "Фикс секретного алгоритма" 
# Эта нода автоматически приватная!

```



### Отправка изменений (Push)

Когда вы делаете `push`, Git++ проверяет права каждой ноды в цепочке.

```bash
# Отправить изменения на рабочий сервер
gpp push --remote work

```

Если вы попытаетесь сделать `gpp push --remote origin` для секретной ноды, система выдаст ошибку или скажет, что пушить нечего, так как у этой ноды нет права ("пермишена") на отправку в `origin`. Ваши секреты в безопасности.

---

##  Справочник команд

| Команда | Описание | Пример |
| --- | --- | --- |
| **`init`** | Создает репозиторий `.gitpp`. | `gpp init` |
| **`add`** | Создает новую ноду (коммит). | `gpp add -m "Message"` |
| **`log`** | Показывает историю изменений. | `gpp log` |
| **`gui`** | Запускает визуализатор графа. | `gpp gui` |
| **`checkout`** | Переключает рабочую директорию на указанную ноду. | `gpp checkout a1b2c3` |
| **`push`** | Отправляет ноды в удаленный репозиторий. | `gpp push --remote origin` |
| **`chrm`** | **Change Remote**. Управляет правами доступа ноды (разрешить/запретить отправку). | `gpp chrm --node ID --remote name --remove` |

## Частые вопросы

**В: Я сделал `push`, но ничего не ушло. Почему?**
О: Проверьте права ноды. Возможно, у ноды, которую вы пытаетесь отправить, нет разрешения для этого `remote`. Используйте `gpp gui` (tooltip на ноде) или проверьте настройки через `chrm`.

**В: Как Git++ работает с обычным Git?**
О: Git++ создает внутри себя несколько папок `.git_origin`, `.git_work` и т.д. Он автоматически переключает "настоящую" папку `.git` (через симлинк) в зависимости от того, с каким контекстом вы работаете. Вам не нужно об этом думать, просто используйте `gpp`.